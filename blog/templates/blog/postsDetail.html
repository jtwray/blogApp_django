{% extends 'blog/base.html' %}
{% block content %}
  <div class="post">
      {% if post.published_date %}
        <div class= "date">
          {{ post.published_date }}
        </div>
      {% else %}
        <a href="{% url 'postPublish' pk=post.pk  %}" class="btn btn-primary">Publish</a>
      {% endif %}
      {% if user.is_authenticated %}
        <a href="{% url 'postEdit' pk=post.pk %}"><span class="fas fa-pen-square fa-2x"></span></a>
      {% endif %}
      <h1>{{ post.title }}</h1>
      <p>{{ post.text|linebreaksbr }}</p>
  </div>
  <hr>
  {% load comments %}
  {% render_comment_list for post %}
  <a href="{%  url 'add_comment_to_post' pk=post.pk %}" class="btn btn-secondary">[+]comment</a>
  {% for comment in post.comments.all %}

  {% get_comment_list for blog.post object_pk as comment_list %}
{% for comment in comment_list %}
<p>Posted by: {{ comment.user_name }} on {{ comment.submit_date }}</p>
...
<p>Comment: {{ comment.comment }}</p>
...
{% endfor %}
    <div class= "comment">
      <div class ="date">
        {{ comment.created_date }}
      </div>  
      <strong>{{ comment.author }}</strong>
      <p>{{ comment.text }}</p>
    </div>
  {% empty %}
    <p>No comments Yet</p>

  {% endfor %}
    
{% endblock %}

